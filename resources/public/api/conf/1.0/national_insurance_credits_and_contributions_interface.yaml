openapi: 3.0.3
info:
  title: National Insurance Contribution and Credits Interface
  description: |-
    API for retrieving data for a given benefit type that is critical to successfully checking a claimants eligibility for any of the following benefits - BSP, GYSP, ESA, JSA, MA
    # Usage Terms
    These interfaces are business-critical interfaces for HMRC and DWP, supporting thousands of staff - all consumption, or change in consumption levels, should be registered and fully approved (see Registered Consumers below).
  version: 0.0.4 Draft
  contact: {}
servers:
  - url: https://test-api.service.hmrc.gov.uk
    description: Sandbox
  - url: https://api.service.hmrc.gov.uk
    description: Production

paths:
  /misc/national-insurance-contributions-and-credits/benefit-eligibility-info:
    post:
      summary: Request information that can be used to determine benefit eligibility
      description: Submit a request for benefit information based on benefit type
      security:
        - applicationRestricted:
            - write:protect-connect
      operationId: getBenefitEligibilityInformation
      parameters:
        - $ref: "#/components/parameters/authorization"
        - $ref: "#/components/parameters/accept"
        - $ref: "#/components/parameters/correlationId"
        - $ref: "#/components/parameters/nextCursor"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/BenefitEligibilityInfoRequestMultipleBenefitTypes'
                - $ref: '#/components/schemas/BenefitEligibilityInfoRequestGYSP'
                - $ref: '#/components/schemas/BenefitEligibilityInfoRequestMA'
            examples:
              BSP_request:
                summary: BSP request
                value:
                  benefitType: "BSP"
                  nationalInsuranceNumber: "CD789012E"
                  niContributionsAndCredits:
                    dateOfBirth: "1958-03-22"
                    startTaxYear: 2018
                    endTaxYear: 2024
              GYSP_request:
                summary: GYSP request
                value:
                  benefitType: "GYSP"
                  nationalInsuranceNumber: "GH567890J"
                  niContributionsAndCredits:
                    dateOfBirth: "1955-06-20"
                    startTaxYear: 2018
                    endTaxYear: 2023
                  benefitCalculation:
                    benefitType: "GRADUATED"
                    pensionProcessingArea: "NORTH"
              ESA_request:
                summary: ESA request
                value:
                  benefitType: "ESA"
                  nationalInsuranceNumber: "QR456789S"
                  niContributionsAndCredits:
                    dateOfBirth: "1975-09-14"
                    startTaxYear: 2020
                    endTaxYear: 2023
              JSA_request:
                summary: JSA request
                value:
                  benefitType: "JSA"
                  nationalInsuranceNumber: "AB234567C"
                  niContributionsAndCredits:
                    dateOfBirth: "1982-12-03"
                    startTaxYear: 2021
                    endTaxYear: 2023
              MA_minimal_request:
                summary: MA request - Minimal required fields
                value:
                  benefitType: "MA"
                  nationalInsuranceNumber: "KL890123M"
                  niContributionsAndCredits:
                    dateOfBirth: "1985-04-18"
                    startTaxYear: 2022
                    endTaxYear: 2023
                  liabilities:
                    searchCategories:
                      - "CLASS-2-LIABILITY-UK"
              MA_full_request:
                summary: MA request - All fields including optional
                value:
                  benefitType: "MA"
                  nationalInsuranceNumber: "NP012345Q"
                  niContributionsAndCredits:
                    dateOfBirth: "1988-07-25"
                    startTaxYear: 2021
                    endTaxYear: 2023
                  liabilities:
                    searchCategories:
                      - "CLASS-2-LIABILITY-UK"
                    earliestLiabilityStartDate: "2021-01-01"
                    liabilityStart: "2021-06-15"
                    liabilityEnd: "2022-06-14"

      responses:
        '200':
          $ref: '#/components/responses/BenefitEligibilityInfoSuccessResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/UnprocessableEntity'
        '500':
          $ref: '#/components/responses/InternalServerError'
        '502':
          $ref: '#/components/responses/DownstreamFailure'

components:
  parameters:
    authorization:
      description: Identity of the Originating System that made the API call.
      in: header
      name: Authorization
      required: true
      schema:
        $ref: "#/components/schemas/Authorization"
    accept:
      description: Request the version of the API you want to use by including an Accept header with a media type of.
      in: header
      name: Accept
      required: true
      schema:
        $ref: "#/components/schemas/Accept"
    correlationId:
      description: Request the version of the API you want to use by including an Accept header with a media type of.
      in: header
      name: CorrelationId
      required: true
      schema:
        $ref: "#/components/schemas/CorrelationId"
    nextCursor:
      name: nextCursor
      in: query
      description: Used for pagination restart
      required: false
      schema:
        $ref: "#/components/schemas/NextCursor"
  headers:
    Authorization:
      required: true
      schema:
        $ref: "#/components/schemas/Authorization"
    Accept:
      required: true
      schema:
        $ref: "#/components/schemas/Accept"
  responses:
    BenefitEligibilityInfoSuccessResponse:
      description: Successful response
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '#/components/schemas/BSPSuccessResponse'
              - $ref: '#/components/schemas/GYSPSuccessResponse'
              - $ref: '#/components/schemas/ESASuccessResponse'
              - $ref: '#/components/schemas/JSASuccessResponse'
              - $ref: '#/components/schemas/MASuccessResponse'
            discriminator:
              propertyName: benefitType
              mapping:
                BSP: '#/components/schemas/BSPSuccessResponse'
                GYSP: '#/components/schemas/GYSPSuccessResponse'
                ESA: '#/components/schemas/ESASuccessResponse'
                JSA: '#/components/schemas/JSASuccessResponse'
                MA: '#/components/schemas/MASuccessResponse'
          examples:
            BSP_minimal_success:
              summary: BSP - Minimal response
              value:
                benefitType: "BSP"
                nationalInsuranceNumber: "AB123456C"
                marriageDetailsResult:
                  marriageDetails: [ ]
                niContributionsAndCreditsResult:
                  class1ContributionAndCredits: []
                  class2ContributionAndCredits: []

            BSP_maximal_success:
              summary: BSP - Maximal response
              value:
                benefitType: "BSP"
                nationalInsuranceNumber: "AB123456C"
                marriageDetailsResult:
                  marriageDetails:
                    - status: "CIVIL PARTNER"
                      startDate: "1999-01-01"
                      startDateStatus: "VERIFIED"
                      endDate: "2001-01-01"
                      endDateStatus: "VERIFIED"
                      spouseIdentifier: "AB123456C"
                      spouseForename: "Skywalker"
                      spouseSurname: "Luke"
                niContributionsAndCreditsResult:
                  totalGraduatedPensionUnits: 9.5
                  class1ContributionAndCredits:
                    - taxYear: 2020
                      numberOfContributionsAndCredits: 52
                      contributionCategoryLetter: "A"
                      contributionCategory: "STANDARD RATE"
                      contributionCreditType: "C1"
                      primaryContribution: 3000.0
                      class1ContributionStatus: "VALID"
                      primaryPaidEarnings: 25000.0
                      creditSource: "EMPLOYMENT SERVICES"
                      employerName: "ACME"
                      latePaymentPeriod: "L"
                    - taxYear: 2021
                      numberOfContributionsAndCredits: 48
                      contributionCategoryLetter: "A"
                      contributionCategory: "STANDARD RATE"
                      contributionCreditType: "C1"
                      primaryContribution: 2880.0
                      class1ContributionStatus: "VALID"
                      primaryPaidEarnings: 24000.0
                      creditSource: "EMPLOYMENT SERVICES"
                      employerName: "CORP"
                      latePaymentPeriod: "ZZ"
                  class2ContributionAndCredits:
                    - taxYear: 2020
                      numberOfContributionsAndCredits: 52
                      contributionCreditType: "C2"
                      class2Or3EarningsFactor: 1.5
                      class2NIContributonAmount: 150.0
                      class2Or3CreditStatus: "VALID"
                      creditSource: "DIRECT DEBIT"
                      latePaymentPeriod: "ZZ"
                    - taxYear: 2022
                      numberOfContributionsAndCredits: 30
                      contributionCreditType: "C2"
                      class2Or3EarningsFactor: 2.1
                      class2NIContributonAmount: 120.0
                      class2Or3CreditStatus: "VALID"
                      creditSource: "QUARTERLY BILLING"
                      latePaymentPeriod: "L"
                nextCursor: 9bd6d1b0-26a9-4c1d-bfb3-03bfb0157689

            GYSP_minimal_success:
              summary: GYSP - Minimal response
              value:
                benefitType: "GYSP"
                nationalInsuranceNumber: "GH567890J"
                marriageDetailsResult:
                  marriageDetails: []
                longTermBenefitCalculationDetailsResult:
                  benefitCalculationDetails: []
                schemeMembershipDetailsResult:
                  schemeMembershipDetails: []
                individualStatePensionInfoResult:
                  contributionsByTaxYear: []
                niContributionsAndCreditsResult:
                  class1ContributionAndCredits: []
                  class2ContributionAndCredits: []

            GYSP_maximal_success:
              summary: GYSP - Maximal response
              value:
                benefitType: "GYSP"
                nationalInsuranceNumber: "AB123456C"
                marriageDetailsResult:
                  marriageDetails:
                    - status: "CIVIL PARTNER"
                      startDate: "1999-01-01"
                      startDateStatus: "VERIFIED"
                      endDate: "2001-01-01"
                      endDateStatus: "VERIFIED"
                      spouseIdentifier: "AB123456C"
                      spouseForename: "Skywalker"
                      spouseSurname: "Luke"
                longTermBenefitCalculationDetailsResult:
                  benefitCalculationDetails:
                    - guaranteedMinimumPensionContractedOutDeductionsPre1988: 10.56
                      guaranteedMinimumPensionContractedOutDeductionsPost1988: 10.56
                      contractedOutDeductionsPre1988: 10.56
                      contractedOutDeductionsPost1988: 10.56
                      longTermBenefitNotes:
                        - "Invalid Note Type Encountered."
                        - "Married Woman's/Widow's Reduced Rate Authority recorded on this account between 07/04/2020 and 07/04/2025."
                        - "Married Woman's/Widow's Reduced Rate Authority recorded on this account from 07/04/2025"
                        - "Widow's Benefit Award UNKNOWN  recorded on this account between 07/04/2020 and 07/04/2025."
                        - "Widow's Benefit Award UNKNOWN  recorded on this account from 07/04/2025."
                        - "Retirement Position of UNKNOWN recorded on this account between 07/04/2020 and 07/04/2025."
                        - "Retirement Position of UNKNOWN recorded on this account from 07/04/2025."
                        - "Retirement Position of UNKNOWN recorded on this account between NOT KNOWN."
                schemeMembershipDetailsResult:
                  schemeMembershipDetails:
                    - schemeName: "ACME PENSION SCHEME"
                      schemeMembershipStartDate: "2022-06-27"
                      schemeMembershipEndDate: "2022-06-27"
                      employersContractedOutNumberDetails: "S3123456B"
                individualStatePensionInfoResult:
                  numberOfQualifyingYears: 35
                  contributionsByTaxYear:
                    - totalPrimaryPaidEarnings: 48500.75
                      qualifyingTaxYear: true
                    - totalPrimaryPaidEarnings: 39875.9
                      qualifyingTaxYear: false
                niContributionsAndCreditsResult:
                  totalGraduatedPensionUnits: 53
                  class1ContributionAndCredits:
                    - taxYear: 2022
                      numberOfContributionsAndCredits: 53
                      contributionCategoryLetter: "U"
                      contributionCategory: "(NONE)"
                      contributionCreditType: "C1"
                      primaryContribution: 99999999999999.98
                      class1ContributionStatus: "COMPLIANCE & YIELD INCOMPLETE"
                      primaryPaidEarnings: 99999999999999.98
                      creditSource: "NOT KNOWN"
                      employerName: "ipOpMs"
                      latePaymentPeriod: "L"
                  class2ContributionAndCredits:
                    - taxYear: 2022
                      numberOfContributionsAndCredits: 53
                      contributionCreditType: "C1"
                      class2Or3EarningsFactor: 99999999999999.98
                      class2NIContributionAmount: 99999999999999.98
                      class2Or3CreditStatus: "NOT KNOWN/NOT APPLICABLE"
                      creditSource: "NOT KNOWN"
                      latePaymentPeriod: "L"
                nextCursor: 9bd6d1b0-26a9-4c1d-bfb3-03bfb0157689

            ESA_minimal_success:
              summary: ESA - Minimal response
              value:
                benefitType: "ESA"
                nationalInsuranceNumber: "QR456789S"
                niContributionsAndCreditsResult:
                  class1ContributionAndCredits: []
                  class2ContributionAndCredits: []

            ESA_maximal_success:
              summary: ESA - Maximal response
              value:
                benefitType: "ESA"
                nationalInsuranceNumber: "QR456789S"
                niContributionsAndCreditsResult:
                  totalGraduatedPensionUnits: 2.5
                  class1ContributionAndCredits:
                    - taxYear: 2021
                      numberOfContributionsAndCredits: 39
                      contributionCategoryLetter: "A"
                      contributionCategory: "STANDARD RATE"
                      contributionCreditType: "2A"
                      primaryContribution: 1800.0
                      class1ContributionStatus: "VALID"
                      primaryPaidEarnings: 15000.0
                      creditSource: "EMPLOYMENT AND SUPPORT"
                      employerName: "Widget"
                      latePaymentPeriod: "ZZ"
                    - taxYear: 2022
                      numberOfContributionsAndCredits: 26
                      contributionCategoryLetter: "A"
                      contributionCategory: "STANDARD RATE"
                      contributionCreditType: "2A"
                      primaryContribution: 2160.0
                      class1ContributionStatus: "VALID"
                      primaryPaidEarnings: 18000.0
                      creditSource: "EMPLOYMENT AND SUPPORT"
                      employerName: "Widget"
                      latePaymentPeriod: "ZZ"
                    - taxYear: 2020
                      numberOfContributionsAndCredits: 20
                      contributionCategoryLetter: "A"
                      contributionCategory: "STANDARD RATE"
                      contributionCreditType: "CR1"
                      primaryContribution: 0.0
                      class1ContributionStatus: "VALID"
                      primaryPaidEarnings: 0.0
                      creditSource: "EMPLOYMENT AND SUPPORT"
                      employerName: ""
                      latePaymentPeriod: "ZZ"
                  class2ContributionAndCredits:
                    - taxYear: 2023
                      numberOfContributionsAndCredits: 20
                      contributionCreditType: "2A"
                      class2Or3EarningsFactor: 1.3
                      class2NIContributonAmount: 52.0
                      class2Or3CreditStatus: "VALID"
                      creditSource: "EMPLOYMENT AND SUPPORT"
                      latePaymentPeriod: "ZZ"
                    - taxYear: 2021
                      numberOfContributionsAndCredits: 15
                      contributionCreditType: "2A"
                      class2Or3EarningsFactor: 0.8
                      class2NIContributonAmount: 30.0
                      class2Or3CreditStatus: "VALID"
                      creditSource: "EMPLOYMENT AND SUPPORT"
                      latePaymentPeriod: "L"

            JSA_minimal_success:
              summary: JSA - Minimal response
              value:
                benefitType: "JSA"
                nationalInsuranceNumber: "AB234567C"
                niContributionsAndCreditsResult:
                  class1ContributionAndCredits: []
                  class2ContributionAndCredits: []

            JSA_maximal_success:
              summary: JSA - Maximal response
              value:
                benefitType: "JSA"
                nationalInsuranceNumber: "AB234567C"
                niContributionsAndCreditsResult:
                  totalGraduatedPensionUnits: 1.2
                  class1ContributionAndCredits:
                    - taxYear: 2019
                      numberOfContributionsAndCredits: 15
                      contributionCategoryLetter: "A"
                      contributionCategory: "STANDARD RATE"
                      contributionCreditType: "2B"
                      primaryContribution: 1200.0
                      class1ContributionStatus: "VALID"
                      primaryPaidEarnings: 10000.0
                      creditSource: "JSA TAPE INPUT"
                      employerName: "Temp"
                      latePaymentPeriod: "L"
                    - taxYear: 2021
                      numberOfContributionsAndCredits: 20
                      contributionCategoryLetter: "A"
                      contributionCategory: "STANDARD RATE"
                      contributionCreditType: "2B"
                      primaryContribution: 1440.0
                      class1ContributionStatus: "VALID"
                      primaryPaidEarnings: 12000.0
                      creditSource: "JSA TAPE INPUT"
                      employerName: "Temp"
                      latePaymentPeriod: "L"
                    - taxYear: 2020
                      numberOfContributionsAndCredits: 30
                      contributionCategoryLetter: "A"
                      contributionCategory: "STANDARD RATE"
                      contributionCreditType: "CR1"
                      primaryContribution: 0.0
                      class1ContributionStatus: "VALID"
                      primaryPaidEarnings: 0.0
                      creditSource: "JSA TAPE INPUT"
                      employerName: ""
                      latePaymentPeriod: "ZZ"
                  class2ContributionAndCredits:
                    - taxYear: 2022
                      numberOfContributionsAndCredits: 30
                      contributionCreditType: "2B"
                      class2Or3EarningsFactor: 1.1
                      class2NIContributonAmount: 44.0
                      class2Or3CreditStatus: "VALID"
                      creditSource: "JSA TAPE INPUT"
                      latePaymentPeriod: "ZZ"
                    - taxYear: 2023
                      numberOfContributionsAndCredits: 25
                      contributionCreditType: "2B"
                      class2Or3EarningsFactor: 0.9
                      class2NIContributonAmount: 36.0
                      class2Or3CreditStatus: "VALID"
                      creditSource: "JSA PAPER INPUT"
                      latePaymentPeriod: "L"

            MA_minimal_success:
              summary: MA - Minimal response
              value:
                benefitType: "MA"
                nationalInsuranceNumber: "KL890123M"
                class2MAReceiptsResult:
                  receiptDates: []
                liabilitySummaryDetailsResult:
                  liabilityDetails: []
                niContributionsAndCreditsResult:
                  class1ContributionAndCredits: []
                  class2ContributionAndCredits: []

            MA_maximal_success:
              summary: MA - Maximal response
              value:
                benefitType: "MA"
                nationalInsuranceNumber: "AB123456C"
                class2MAReceiptsResult:
                  receiptDates:
                    - "2025-12-10"
                liabilitySummaryDetailsResult:
                  liabilityDetails:
                    - startDate: "2026-01-01"
                      endDate: "2027-01-01"
                niContributionsAndCreditsResult:
                  totalGraduatedPensionUnits: 53
                  class1ContributionAndCredits:
                    - taxYear: 2022
                      numberOfContributionsAndCredits: 53
                      contributionCategoryLetter: "U"
                      contributionCategory: "(NONE)"
                      contributionCreditType: "C1"
                      primaryContribution: 99999999999999.98
                      class1ContributionStatus: "COMPLIANCE & YIELD INCOMPLETE"
                      primaryPaidEarnings: 99999999999999.98
                      creditSource: "NOT KNOWN"
                      employerName: "ipOpMs"
                      latePaymentPeriod: "L"
                  class2ContributionAndCredits:
                    - taxYear: 2022
                      numberOfContributionsAndCredits: 53
                      contributionCreditType: "C1"
                      class2Or3EarningsFactor: 99999999999999.98
                      class2NIContributionAmount: 99999999999999.98
                      class2Or3CreditStatus: "NOT KNOWN/NOT APPLICABLE"
                      creditSource: "NOT KNOWN"
                      latePaymentPeriod: "L"
                nextCursor: 9bd6d1b0-26a9-4c1d-bfb3-03bfb0157689

    BadRequest:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            missing_type:
              summary: Missing benefit type
              value:
                code: "BAD_REQUEST"
                reason: "type field is required"

    NotFound:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            missing_record:
              summary: Missing pagination record
              value:
                code: "NOT_FOUND"
                reason: "pagination record not found"

    Forbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            missing_auth_token:
              summary: Missing authentication token
              value:
                code: "FORBIDDEN"
                reason: "authentication token is required"
            invalid_auth_token:
              summary: Invalid authentication token
              value:
                code: "FORBIDDEN"
                reason: "invalid or expired authentication token"

    UnprocessableEntity:
      description: Unprocessable Entity
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            invalid_ni_number_format:
              summary: Invalid National Insurance number format
              value:
                code: "UNPROCESSABLE_ENTITY"
                reason: "invalid national insurance number format"
            invalid_date_format:
              summary: Invalid date format
              value:
                code: "UNPROCESSABLE_ENTITY"
                reason: "dateOfBirth must be in YYYY-MM-DD format"
            "422_StartYearAfterEndYear":
              summary: Start Year After End Year
              value:
                code: "UNPROCESSABLE_ENTITY"
                reason: "Start tax year after end tax year"
            "422_StartYearPre1975":
              summary: Start Year Pre 1975
              value:
                code: "UNPROCESSABLE_ENTITY"
                reason: "Start tax year before 1975"
            "422_StartYearPostCY-1":
              summary: Start Year Post CY-1
              value:
                code: "UNPROCESSABLE_ENTITY"
                reason: "Start tax year after CY-1"
            "422_EndYearPostCY-1":
              summary: End Year Post CY-1
              value:
                code: "UNPROCESSABLE_ENTITY"
                reason: "End tax year after CY-1"
    InternalServerError:
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            unexpected_error:
              summary: Unexpected error
              value:
                code: "INTERNAL_SERVER_ERROR"
                reason: "an unexpected error occurred while processing the request"

    DownstreamFailure:
      description: Partial or complete failure from downstream services
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/FailureResponse'
          examples:
            partial_failure:
              summary: Partial failure - a subset of all the downstream's called for a given benefit responds with a failure while the rest are successful
              value:
                status: "PARTIAL_FAILURE"
                benefitType: "MA"
                nationalInsuranceNumber: "KL890123M"
                summary:
                  totalCalls: 3
                  successful: 2
                  failed: 1
                downStreams:
                  - apiName: "NiContributionsAndCredits"
                    status: "SUCCESS"
                  - apiName: "Class2MAReceipts"
                    status: "SUCCESS"
                  - apiName: "Liabilities"
                    status: "FAILURE"
                    error:
                      code: "TIMEOUT"
                      message: "liability calculation service timeout"
                      downstreamStatus: 408
            complete_failure:
              summary: Complete failure - every downstream called for a given benefit responds with a failure
              value:
                status: "FAILURE"
                benefitType: "MA"
                nationalInsuranceNumber: "NP012345Q"
                summary:
                  totalCalls: 3
                  successful: 0
                  failed: 3
                downStreams:
                  - apiName: "NiContributionsAndCredits"
                    status: "FAILURE"
                    error:
                      code: "FORBIDDEN"
                      message: "access denied to maternity allowance service"
                      downstreamStatus: 403
                  - apiName: "Class2MAReceipts"
                    status: "FAILURE"
                    error:
                      code: "INTERNAL_SERVER_ERROR"
                      message: "class 2 MA receipts service internal error"
                      downstreamStatus: 500
                  - apiName: "Liabilities"
                    status: "FAILURE"
                    error:
                      code: "BAD_REQUEST"
                      message: "invalid liability calculation parameters"
                      downstreamStatus: 400
  schemas:

    CorrelationId:
      description: used for traceability purposes - note that this value in the response matches that received in the request to allow correlation.
      example: e470d658-99f7-4292-a4a1-ed12c72f1337
      format: uuid
      type: string

    NextCursor:
      description: Used for pagination restart
      type: string
      format: uuid
      example: 9bd6d1b0-26a9-4c1d-bfb3-03bfb0157689

    Authorization:
      description: Authorization token used to contact api
      type: string
      example: Bearer <token>

    Accept:
      description: Request the version of the API you want to use by including an Accept header with a media type of
      type: string
      pattern: application/vnd.hmrc.[version]+[content-type]
      example: application/vnd.hmrc.1.0+json

    NiContributionsAndCredits:
      type: object
      required:
        - dateOfBirth
        - startTaxYear
        - endTaxYear
      properties:
        dateOfBirth:
          format: date
          description: The date of birth of the individual.
          type: string
        startTaxYear:
          $ref: '#/components/schemas/taxYear'
        endTaxYear:
          $ref: '#/components/schemas/taxYear'

    LongTermBenefitCalculation:
      type: object
      required:
        - benefitType
      properties:
        benefitType:
          $ref: '#/components/schemas/EnumBenType'
        pensionProcessingArea:
          $ref: '#/components/schemas/EnumEeppflg'

    Liabilities:
      type: object
      required:
        - searchCategories
      properties:
        searchCategories:
          type: array
          items:
            $ref: '#/components/schemas/LiabilitySearchCategoryHyphenated'
        earliestLiabilityStartDate:
          format: date
          description: Denotes the earliest liability start date to retrieve data for.
          type: string
          example: 2022-06-27
        liabilityStart:
          format: date
          description: The date on which this liability started.
          type: string
          example: 2022-06-27
        liabilityEnd:
          format: date
          description: The date on which this liability ended.
          type: string
          example: 2022-06-27

    BenefitEligibilityInfoRequestMultipleBenefitTypes:
      type: object
      required:
        - benefitType
        - nationalInsuranceNumber
        - contributionsAndCredits
      properties:
        benefitType:
          type: string
          enum:
            - ESA
            - JSA
            - BSP
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        niContributionsAndCredits:
          $ref: '#/components/schemas/NiContributionsAndCredits'

    BenefitEligibilityInfoRequestMA:
      type: object
      required:
        - benefitType
        - nationalInsuranceNumber
        - contributionsAndCredits
        - liabilities
      properties:
        benefitType:
          type: string
          enum: [MA]
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        niContributionsAndCredits:
          $ref: '#/components/schemas/NiContributionsAndCredits'
        liabilities:
          $ref: '#/components/schemas/Liabilities'

    BenefitEligibilityInfoRequestGYSP:
      type: object
      required:
        - benefitType
        - nationalInsuranceNumber
        - contributionsAndCredits
        - longTermBenefitCalculation
      properties:
        benefitType:
          type: string
          enum: [GYSP]
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        niContributionsAndCredits:
          $ref: '#/components/schemas/NiContributionsAndCredits'
        longTermBenefitCalculation:
          $ref: '#/components/schemas/LongTermBenefitCalculation'

    # Success Response Schemas
    ESASuccessResponse:
      type: object
      required:
        - benefitType
        - nationalInsuranceNumber
        - niContributionsAndCreditsResult
      properties:
        benefitType:
          type: string
          enum: [ESA]
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        niContributionsAndCreditsResult:
          $ref: '#/components/schemas/PostNIContCredResponse'

    JSASuccessResponse:
      type: object
      required:
        - benefitType
        - nationalInsuranceNumber
        - niContributionsAndCreditsResult
      properties:
        benefitType:
          type: string
          enum: [JSA]
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        niContributionsAndCreditsResult:
          $ref: '#/components/schemas/PostNIContCredResponse'

    BSPSuccessResponse:
      type: object
      required:
        - benefitType
        - nationalInsuranceNumber
        - marriageDetailsResult
        - niContributionsAndCreditsResult
      properties:
        benefitType:
          type: string
          enum: [BSP]
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        marriageDetailsResult:
          $ref: '#/components/schemas/MarriageDetailsResult'
        niContributionsAndCreditsResult:
          $ref: '#/components/schemas/PostNIContCredResponse'
        nextCursor:
          $ref: "#/components/schemas/NextCursor"

    GYSPSuccessResponse:
      type: object
      required:
        - benefitType
        - nationalInsuranceNumber
        - marriageDetailsResult
        - longTermBenefitCalculationDetailsResult
        - schemeMembershipDetailsResult
        - individualStatePensionInfoResult
        - niContributionsAndCreditsResult
      properties:
        benefitType:
          type: string
          enum: [GYSP]
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        marriageDetailsResult:
          $ref: '#/components/schemas/MarriageDetailsResult'
        longTermBenefitCalculationDetailsResult:
          $ref: '#/components/schemas/LongTermBenefitCalculationDetailsResult'
        schemeMembershipDetailsResult:
          $ref: '#/components/schemas/SchemeMembershipDetailsResult'
        individualStatePensionInfoResult:
          $ref: '#/components/schemas/IndividualStatePensionInfoResult'
        niContributionsAndCreditsResult:
          $ref: '#/components/schemas/PostNIContCredResponse'
        nextCursor:
          $ref: "#/components/schemas/NextCursor"

    MASuccessResponse:
      type: object
      required:
        - benefitType
        - nationalInsuranceNumber
        - class2MAReceiptsResult
        - liabilitySummaryDetailsResult
        - niContributionsAndCreditsResult
      properties:
        benefitType:
          type: string
          enum: [MA]
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        class2MAReceiptsResult:
          $ref: '#/components/schemas/Class2MAReceiptsResult'
        liabilitySummaryDetailsResult:
          $ref: '#/components/schemas/LiabilitySummaryDetailsResult'
        niContributionsAndCreditsResult:
          $ref: '#/components/schemas/PostNIContCredResponse'
        nextCursor:
          $ref: "#/components/schemas/NextCursor"

    # Updated GYSP specific result schemas based on actual JSON response
    MarriageDetailsResult:
      type: object
      required:
        - marriageDetails
      properties:
        marriageDetails:
          type: array
          items:
            $ref: '#/components/schemas/MarriageDetail'

    MarriageDetail:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/EnumMgstattp'
        startDate:
          format: date
          description: The date on which the marriage started.
          type: string
        startDateStatus:
          $ref: '#/components/schemas/EnumDateStat'
        endDate:
          format: date
          description: The date on which the marriage ceased.
          type: string
        endDateStatus:
          $ref: '#/components/schemas/EnumVfddttrm'
        spouseIdentifier:
          description: The spouse's identifier of which could be either a Temporary
            Reference Number (TRN) or a National Insurance Number (NINO).
          type: string
        spouseForename:
          description: The spouse's forename.
          maxLength: 99
          minLength: 1
          pattern: "^([A-Za-z '-])+$"
          type: string
          example: Jean-Pierre
        spouseSurname:
          description: The spouse's surname.
          maxLength: 99
          minLength: 2
          pattern: "^([A-Za-z '-])+$"
          type: string
          example: van Cholmondley-warner

    LongTermBenefitCalculationDetailsResult:
      type: object
      required:
        - benefitCalculationDetails
      properties:
        benefitCalculationDetails:
          type: array
          items:
            $ref: '#/components/schemas/BenefitCalculationDetail'

    BenefitCalculationDetail:
      type: object
      properties:
        guaranteedMinimumPensionContractedOutDeductionsPre1988:
          description: Denotes the value of the Guaranteed Minimum Pension (GMP) /
            Contracted-Out Deductions (COD) pre 1988
          multipleOf: 0.01
          maximum: 99999999999999.98
          minimum: -99999999999999.98
          type: number
          example: 10.56
        guaranteedMinimumPensionContractedOutDeductionsPost1988:
          description: Denotes the value of the Guaranteed Minimum Pension (GMP) /
            Contracted-Out Deductions (COD) post 1988
          multipleOf: 0.01
          maximum: 99999999999999.98
          minimum: -99999999999999.98
          type: number
          example: 10.56
        contractedOutDeductionsPre1988:
          description: Denotes the value of the Contracted-Out Deductions (COD) pre
            1988
          multipleOf: 0.01
          maximum: 99999999999999.98
          minimum: -99999999999999.98
          type: number
          example: 10.56
        contractedOutDeductionsPost1988:
          description: Denotes the value of the Contracted-Out Deductions (COD) post
            1988
          multipleOf: 0.01
          maximum: 99999999999999.98
          minimum: -99999999999999.98
          type: number
          example: 10.56
        longTermBenefitNotes:
          description: List of concatenated note fields.
          type: array
          items:
            type: string

    SchemeMembershipDetailsResult:
      type: object
      required:
        - schemeMembershipDetails
      properties:
        schemeMembershipDetails:
          type: array
          items:
            $ref: '#/components/schemas/SchemeMembershipDetail'

    SchemeMembershipDetail:
      type: object
      properties:
        schemeName:
          description: The name of the scheme used for the institution details of
            a benefit scheme.
          maxLength: 54
          minLength: 1
          pattern: "^[a-zA-Z0-9\\/,'.&() -]+$"
          type: string
          example: ACME PENSION SCHEME
        schemeMembershipStartDate:
          format: date
          description: The start date of the benefit scheme membership.
          type: string
          example: 2022-06-27
        schemeMembershipEndDate:
          format: date
          description: The end date of the benefit scheme membership.
          type: string
          example: 2022-06-27
        employersContractedOutNumberDetails:
          description: Denotes the Employer's Contracting-Out Number with prefix and suffix - used where an employer has an occupational pension scheme that is contracted-out of the State Second Pension.
          maxLength: 9
          minLength: 7
          pattern: "^([A-Z]{0,1}\\d{6}[A-Z ^GIO SUVZ]{0,1})$"
          type: string
          example: S3123456B

    IndividualStatePensionInfoResult:
      type: object
      properties:
        numberOfQualifyingYears:
          type: integer
        contributionsByTaxYear:
          type: array
          items:
            $ref: '#/components/schemas/ContributionsByTaxYear'

    ContributionsByTaxYear:
      type: object
      properties:
        totalPrimaryPaidEarnings:
          description: Total earnings including contracted out earnings that count
            towards qualifying status.
          multipleOf: 0.01
          maximum: 99999999999999.98
          minimum: -99999999999999.98
          type: number
          example: 10.56
        qualifyingTaxYear:
          description: Indicates whether the tax year is a qualifying one for an individual's
            basic pension.
          type: boolean
          example: true

    # Updated MA specific result schemas based on actual JSON response
    Class2MAReceiptsResult:
      type: object
      required:
        - receiptDates
      properties:
        receiptDates:
          type: array
          items:
            format: date
            description: The receipt date.
            type: string
            example: 2023-06-27

    LiabilitySummaryDetailsResult:
      type: object
      required:
        - liabilityDetails
      properties:
        liabilityDetails:
          type: array
          items:
            $ref: '#/components/schemas/LiabilityDetail'

    LiabilityDetail:
      type: object
      properties:
        startDate:
          format: date
          description: The date on which this liability started.
          type: string
          example: 2022-06-27
        endDate:
          format: date
          description: The date on which this liability ended.
          type: string
          example: 2022-06-27

    # Keep existing schemas for BSP, ESA, JSA and other shared components

    # National insurance contributions and credits response - Copied from the provided NPS schema
    PostNIContCredResponse:
      description: Success response payload for this API.
      type: object
      properties:
        totalGraduatedPensionUnits:
          format: double
          description: "Denotes the total number of graduated pension units paid to an individual. Value precision allows for up to 6 decimal places - i.e. 10, 10.5, 10.56, 10.567, 10.5678, 10.56789, 10.567890 are all accepted values."
          maximum: 100
          minimum: 0
          type: number
          example: 10
        class1ContributionAndCredits:
          description: Contains an array of Class 1 records.
          type: array
          items:
            $ref: '#/components/schemas/Class1ContributionAndCredits'
        class2ContributionAndCredits:
          description: Contains an array of Class 2 records.
          type: array
          items:
            $ref: '#/components/schemas/Class2ContributionAndCredits'

    Class1ContributionAndCredits:
      description: Contains details of a Class 1 record.
      type: object
      properties:
        taxYear:
          $ref: '#/components/schemas/taxYear'
        numberOfContributionsAndCredits:
          description: Number of weekly credits that apply to the credit record.
          maximum: 53
          minimum: 0
          type: integer
        contributionCategoryLetter:
          $ref: '#/components/schemas/contributionCategoryLetter'
        contributionCategory:
          $ref: '#/components/schemas/EnumContCat'
        contributionCreditType:
          $ref: '#/components/schemas/EnumCCType'
        primaryContribution:
          $ref: '#/components/schemas/unsignedMoney'
        class1ContributionStatus:
          $ref: '#/components/schemas/EnumCl1stat'
        primaryPaidEarnings:
          $ref: '#/components/schemas/unsignedMoney'
        creditSource:
          $ref: '#/components/schemas/EnumCreditSource'
        employerName:
          $ref: '#/components/schemas/employerName'
        latePaymentPeriod:
          $ref: '#/components/schemas/EnumLpind'

    Class2ContributionAndCredits:
      description: Contains details of a Class 2 record.
      type: object
      properties:
        taxYear:
          $ref: '#/components/schemas/taxYear'
        numberOfContributionsAndCredits:
          $ref: '#/components/schemas/numberOfContributionsAndCredits'
        contributionCreditType:
          $ref: '#/components/schemas/EnumCCType'
        class2Or3EarningsFactor:
          $ref: '#/components/schemas/unsignedMoney'
        class2NIContributionAmount:
          $ref: '#/components/schemas/unsignedMoney'
        class2Or3CreditStatus:
          $ref: '#/components/schemas/EnumCl2Stat'
        creditSource:
          $ref: '#/components/schemas/EnumCreditSource'
        latePaymentPeriod:
          $ref: '#/components/schemas/EnumLpind'

    numberOfContributionsAndCredits:
      description: Number of weekly credits that apply to the credit record.
      maximum: 53
      minimum: 0
      type: integer

    # Shared Type Definitions
    taxYear:
      description: "Denotes the tax year (e.g. 2023 for a 2023/2024 tax period)."
      example: 2022
      maximum: 2099
      minimum: 1900
      type: integer

    nationalInsuranceNumber:
      description: "NINO - unique for an individual - note not all individuals qualify to be issued with one, with optional suffix."
      maxLength: 9
      minLength: 8
      pattern: "^([ACEHJLMOPRSWXY][A-CEGHJ-NPR-TW-Z]|B[A-CEHJ-NPR-TW-Z]|G[ACEGHJ-NPR-TW-Z]|[KT][A-CEGHJ-MPR-TW-Z]|N[A-CEGHJL-NPR-SW-Z]|Z[A-CEGHJ-NPR-TW-Y])[0-9]{6}[A-D]{0,1}$"
      example: "AA000001A"
      type: string

    dateString:
      description: "Date in YYYY-MM-DD format."
      format: date
      pattern: "^\\d{4}-\\d{2}-\\d{2}$"
      type: string

    unsignedMoney:
      description: "Positive or zero monetary value."
      maximum: 99999999999999.98
      minimum: 0
      multipleOf: 0.01
      type: number

    contributionCategoryLetter:
      description: "Letter associated with the contribution category."
      maxLength: 1
      minLength: 1
      pattern: "^[A-Z]$"
      type: string

    employerName:
      description: "Employer name, held as a checkbrick in NPS for employment details linked to a contribution."
      minLength: 1
      maxLength: 6
      pattern: "^([A-Za-z ])+$"
      type: string

    # Enum Definitions
    EnumBenType:
      enum:
        - ALL
        - AUTOPIE / AUTOJSP
        - BEREAVED NSP
        - BEREAVEMENT BENEFIT
        - CAA/US
        - CARER'S ALLOWANCE
        - CATEGORY B
        - CLAIMS PAPER
        - DEPENDANT'S WAR PENSION
        - EMPLOYMENT AND SUPPORT
        - EQUIVALENT PENSION BENEFIT
        - GBU
        - GUARDIAN'S ALLOWANCE
        - HOUSING BENEFIT
        - INCAPACITY BENEFIT
        - INDUSTRIAL DEATH BENEFIT
        - JOB RELEASE ALLOWANCE
        - JOB SEEKER'S ALLOWANCE
        - LTB
        - MATERNITY ALLOWANCE
        - NOT KNOWN
        - PENSION SHARING ON DIVORCE
        - PRE-2001 WIDOWER
        - RETIREMENT PENSION
        - RPFA
        - SICKNESS BENEFIT/IVB
        - STB (NOT UB/JSA)
        - UNEMPLOYMENT BENEFIT
        - WIDOWS BENEFIT
      type: string

    EnumEeppflg:
      enum:
        - Job Centre+ Electronic Enabled Pension Processing
        - Standard Electronic Enabled Pension Processing
      type: string

    EnumLpind:
      enum:
        - "L"
        - "LX"
        - "ZY"
        - "ZZ"
      type: string

    EnumCreditSource:
      description: "Denotes the credit source type."
      enum:
        - "NOT KNOWN"
        - "ADP CENTRE LIVINGSTON"
        - "DSS LOCAL OFFICES"
        - "EMPLOYMENT SERVICES"
        - "DIRECT DEBIT"
        - "CARER'S ALLOWANCE (CA)"
        - "HNCIP OR SDA"
        - "NORTHERN IRELAND SICKNESS CREDITS"
        - "JURY SERVICE"
        - "NUBS 2"
        - "NUBS 2 [ALTERNATIVE SB CONDITION MET]"
        - "DWA UNIT (BLACKPOOL) EMPLOYED EARNERS"
        - "DWA UNIT (BLACKPOOL) SELF EMPLOYED EARNERS"
        - "DWA UNIT (BELFAST) EMPLOYED EARNERS"
        - "DWA UNIT (BELFAST) SELF EMPLOYED EARNERS"
        - "ISLE OF MAN"
        - "AUTOCREDITS - INTERNALLY CALCULATED"
        - "AUTOCREDITS - EXTERNALLY INPUT"
        - "JUVENILE CREDITS (INTERNAL)"
        - "WIDOWS CREDITS   (INTERNAL)"
        - "APPROVED TRAINING CREDITS (INTERNAL)"
        - "UNEMPLOYABILITY SUPPLEMENT CREDITS (INTERNAL)"
        - "PSCS INCAP"
        - "LONG TERM SCALE RATE"
        - "ADP READING"
        - "NOT APPLICABLE"
        - "QUARTERLY BILLING"
        - "JSA TAPE INPUT"
        - "JSA TAPE INPUT (ALTERNATIVE SB CONDITION MET)"
        - "JSA PAPER INPUT"
        - "FAMC-NI"
        - "FAMC-GB"
        - "CENTRAL AWARD"
        - "ADP NORTHERN IRELAND"
        - "FAMILY CREDIT (GB)"
        - "FAMILY CREDIT (NI)"
        - "INCAPACITY"
        - "DPTC (GB) EMP"
        - "DPTC (GB) S/EMP"
        - "DPTC (NI) EMP"
        - "DPTC (NI) S/EMP"
        - "WFTC (GB)"
        - "WFTC (NI)"
        - "STATUTORY MATERNITY PAY CREDIT"
        - "STATUTORY ADOPTION PAY CREDIT"
        - "Disabled Tax Credit (Employed)"
        - "Disabled Tax Credit (Self-employed)"
        - "Working Tax Credit (Employed)"
        - "Working Tax Credit (Self-employed)"
        - "EMPLOYMENT AND SUPPORT"
        - "HRP CONVERSION"
        - "CHILD BENEFIT"
        - "CARER'S CREDIT"
        - "FOSTER CARER"
        - "MoD Spouse/Civil Partner's Credits"
        - "ADDITIONAL STATUTORY PATERNITY PAY"
        - "SPECIFIED ADULT CARER"
        - "UNIVERSAL CREDIT"
        - "SHARED PARENTAL PAY"
        - "Post 75 Service Spouses Credit"
        - "Statutory Parental Bereavement Pay"
        - "CARER SUPPORT PAYMENT (CSP)"
        - "Statutory Neonatal Care Pay"
        - "REPLACEMENT CREDITS FOR PARENTS AND CARERS"

    EnumContCat:
      description: "Denotes the contribution category."
      enum:
        - "(NONE)"
        - "CLASS 1A - PAYE EMPLOYER ONLY CONTRIBUTIONS"
        - "CONVERTED ACCOUNT - CONTRACTED OUT"
        - "MARINER FOREIGN GOING REBATE ( REDUCED CONTRACTED-OUT )"
        - "MARINER FOREIGN GOING REBATE ( STANDARD CONTRACTED-OUT )"
        - "MARINER FOREIGN GOING REBATE EQUIVALENT (REDUCED)"
        - "MARINER FOREIGN GOING REBATE EQUIVALENT (SECONDARY ONLY)"
        - "MARINER FOREIGN GOING REBATE EQUIVALENT (STANDARD)"
        - "MARINER REDUNDANCY FUND & FOREIGN GOING REBATE ( REDUCED C-OUT)"
        - "MARINER REDUNDANCY FUND & FOREIGN GOING REBATE ( STANDARD C-OUT)"
        - "MARINER REDUNDANCY FUND & FOREIGN GOING REBATE EQUIV.(SECONDARY ONLY)"
        - "MARINER REDUNDANCY FUND & FRGN GNG REBATE EQUIV.(STD)"
        - "MARINER REDUNDANCY FUND & FRGN GOING REBATE EQUIV.(RDCD)"
        - "MARINER REDUNDANCY FUND REBATE ( REDUCED CONTRACTED-OUT )"
        - "MARINER REDUNDANCY FUND REBATE ( STANDARD CONTRACTED-OUT )"
        - "MARINER REDUNDANCY FUND REBATE EQUIV. (RDCD)"
        - "MARINER REDUNDANCY FUND REBATE EQUIVALENT (SECONDARY ONLY)"
        - "MARINER REDUNDANCY FUND REBATE EQUIVALENT (STANDARD)"
        - "MARRIED WOMAN'S REDUCED RATE ELECTION"
        - "NO LIABILITY"
        - "OFFICE HOLDERS"
        - "REDUCED RATE"
        - "REDUCED RATE CONTRACTED-OUT"
        - "STANDARD RATE"
        - "STANDARD RATE CONTRACTED-OUT"
        - "UNALLOCATED"
        - "ZERO RATE"
      type: string

    EnumCl1stat:
      description: "Denotes the status for the contribution."
      enum:
        - "COMPLIANCE & YIELD INCOMPLETE"
        - "CURRENT"
        - "HISTORIC AMENDED"
        - "HISTORIC CANCELLED"
        - "INVALID - NO RCF"
        - "INVALID - RCF"
        - "INVALID COMPATIBILITY CHECK"
        - "NOT KNOWN / NOT APPLICABLE"
        - "POTENTIAL"
        - "VALID"
        - "VALID RCF"
      type: string

    EnumCl2Stat:
      description: "Denotes the status for the credit."
      enum:
        - "NOT KNOWN/NOT APPLICABLE"
        - "VALID"
        - "INVALID"
        - "POTENTIAL"
        - "INVALID COMPATIBILITY CHECK"
      type: string

    EnumCCType:
      description: "Short code relating to the type of contribution or credit."
      enum:
        - "C1"
        - "HMF"
        - "MAR"
        - "CS"
        - "EON"
        - "CR1"
        - "C2"
        - "C2W"
        - "SF"
        - "2A"
        - "2B"
        - "2C"
        - "2D"
        - "SFA"
        - "SFB"
        - "SFC"
        - "SFD"
        - "VDA"
        - "VDB"
        - "VDC"
        - "VDD"
        - "2N"
      type: string

    EnumMgstattp:
      description: Current status of individual's marriage
      enum:
        - (NONE)
        - CIVIL PARTNER
        - CIVIL PARTNERSHIP ANNULLED
        - CIVIL PARTNERSHIP DISSOLVED
        - CIVIL PARTNERSHIP TERMINATED - REASON N/K
        - DIVORCED
        - MARRIAGE ANNULLED
        - MARRIAGE TERMINATED - REASON NOT KNOWN
        - MARRIED
        - SINGLE
        - SURVIVING CIVIL PARTNER
        - VOID
        - WIDOWED
      type: string
    EnumDateStat:
      description: The status of the marriage start date.
      enum:
        - COEG Confirmed
        - NOT KNOWN
        - NOT VERIFIED
        - VERIFIED
      type: string
    EnumVfddttrm:
      description: The status of the marriage end date.
      enum:
        - IN EFFECT
        - NOT KNOWN
        - UNVERIFIED
        - VERIFIED
      type: string

    LiabilitySearchCategoryHyphenated:
      enum:
        - "ABROAD"
        - "ABSOLUTE-WAIVER"
        - "ALL-LIABILITIES"
        - "APPROVED-TRAINING"
        - "CA-S2P"
        - "CL2-EC_BILATERAL-REGS"
        - "CLASS-2-CONVERTED-FROM-NIRS1"
        - "CLASS-2-IN-SA"
        - "CLASS-2-LIABILITY-UK"
        - "CLASS-2-MATERNITY-ALLOWANCE"
        - "CLASS-2-VOLUNTARY-UK"
        - "CLASS-3-UK"
        - "CLASS-3-BILLING-OVERRIDE"
        - "CLASS-3-CONVERTED-FROM-NIRS1"
        - "CODED-OUT"
        - "CONTINUING-CLASS-1-LIABILITY"
        - "CONTINUING-CLASS-2-LIABILITY"
        - "CONTRIBUTOR-INITIATED-NON-LIABILITY-OVERRIDE"
        - "CRIMINAL-PROCEEDINGS"
        - "CRS_RO"
        - "Carer-of-AA_CAA_DLA-recipient"
        - "Carer-Support-Payment"
        - "Carers-Allowance"
        - "Carers-Credit"
        - "Child-Benefit"
        - "Class-2-Billing-Override"
        - "DEFERMENT-TYPE-1"
        - "DEFERMENT-TYPE-2"
        - "DEFERMENT-TYPE-3"
        - "DEFERMENT-TYPE-4"
        - "DPTC-GB-EMPLOYED"
        - "DPTC-GB-SELF-EMPLOYED"
        - "DPTC-NI-EMPLOYED"
        - "DPTC-NI-SELF-EMPLOYED"
        - "DUMMY-101"
        - "DUMMY-102"
        - "DWA-GB-EMPLOYED"
        - "DWA-GB-SELF-EMPLOYED"
        - "DWA-NI-EMPLOYED"
        - "DWA-NI-SELF-EMPLOYED"
        - "Disabled-Tax-Credit-Employed"
        - "Disabled-Tax-Credit-Self-Employed"
        - "ESA-S2P"
        - "FULL-TIME-EDUCATION"
        - "FamC-GB"
        - "FamC-NI"
        - "Foreign-Earnings-Qualification-S2P"
        - "Foster-Carer"
        - "HIGHER-RATE-PROVISION-OVERRIDE"
        - "HMF"
        - "HOME-RESPONSIBILITY-PROTECTION-AA_CAA"
        - "HOME-RESPONSIBILITY-PROTECTION-CBC-AUTO"
        - "HOME-RESPONSIBILITY-PROTECTION-CBC-CLERICAL"
        - "HOME-RESPONSIBILITY-PROTECTION-DLA"
        - "HOME-RESPONSIBILITY-PROTECTION-FOSTER-CARERS"
        - "HOME-RESPONSIBILITY-PROTECTION-I_S"
        - "IB-S2P"
        - "INSOLVENCY-CLASS-1"
        - "INSOLVENCY-CLASS-2"
        - "IRRECOVERABLE-ARREARS"
        - "ISLE-OF-MAN"
        - "LCW_LCWRA"
        - "LCW_LCWRA-Override"
        - "LONG-TERM-NON-EMPLOYMENT"
        - "LONG-TERM-SCALE-RATE-LTSR"
        - "LOST-CARD"
        - "MARINERS-VOLUNTARY-CLASS-2"
        - "MARRIED-WOMANS-REDUCED-RATE"
        - "NEGLIGENT-EMPLOYEE"
        - "NOT-APPLICABLE"
        - "PAYMENT-OF-ARREARS-BY-ADMINISTRATIVE-ORDER"
        - "PAYMENT-OF-ARREARS-BY-INSTALMENTS"
        - "PERIODS-OF-ESA-AUTO"
        - "PERIODS-OF-ESA-CLERICAL"
        - "PERIODS-OF-INCAPACITY-AUTO"
        - "PERIODS-OF-INCAPACITY-CLERICAL"
        - "PROVISIONAL-WAIVER"
        - "PSEUDO-CIVIL-RECOVERY-SECTION"
        - "PSEUDO-DEBT-MANAGEMENT-SECTION"
        - "PSEUDO-INSOLVENCY-SECTION"
        - "PSEUDO-SUBJECT-TO-NORMAL-COLLECTION-ACTION"
        - "REDUCED-BENEFIT-DIRECTIVE-RBD"
        - "SENT-TO-IDMS"
        - "SHAREFISHERMAN"
        - "SHAREFISHERMAN-IN-SA"
        - "SHAREFISHERMAN-UNEMPLOYMENT-BENEFIT"
        - "SICKNESS"
        - "SMALL-EARNINGS-EXCEPTION"
        - "SPT-LPT"
        - "SPT-LPT-EC"
        - "SYSTEM-INITIATED-NON-LIABILITY-OVERRIDE"
        - "Specified-Adult-Carer"
        - "Transferred-ChB-Liability"
        - "UNDER-SMALL-PROFIT-THRESHOLD"
        - "UNEMPLOYABILITY-SUPPLEMENT"
        - "Universal-Credit"
        - "Universal-Credit-S2P"
        - "VOLUNTARY-CLASS-2-ABROAD"
        - "VOLUNTARY-CLASS-2-ABROAD-BY-EMPLOYERS-SCHEDULE"
        - "VOLUNTARY-CLASS-3-ABROAD"
        - "VOLUNTARY-CLASS-3-ABROAD-BY-EMPLOYERS-SCHEDULE"
        - "VOLUNTEER-DEVELOPMENT-WORKER"
        - "WFTC-GB"
        - "WFTC-NI"
        - "Working-Tax-Credit-Employed"
        - "Working-Tax-Credit-Self-Employed"
      type: string

    # Error and Failure Response Schemas
    FailureResponse:
      type: object
      required:
        - status
        - benefitType
        - nationalInsuranceNumber
        - summary
        - downStreams
      properties:
        status:
          type: string
          enum: [PARTIAL_FAILURE, FAILURE]
        benefitType:
          type: string
          enum: [BSP, GYSP, ESA, JSA, MA]
        nationalInsuranceNumber:
          $ref: '#/components/schemas/nationalInsuranceNumber'
        dateOfBirth:
          $ref: '#/components/schemas/dateString'
        startTaxYear:
          $ref: '#/components/schemas/taxYear'
        endTaxYear:
          $ref: '#/components/schemas/taxYear'
        summary:
          $ref: '#/components/schemas/Summary'
        downStreams:
          type: array
          items:
            $ref: '#/components/schemas/DownstreamResult'

    Summary:
      type: object
      required:
        - totalCalls
        - successful
        - failed
      properties:
        totalCalls:
          type: integer
          minimum: 0
        successful:
          type: integer
          minimum: 0
        failed:
          type: integer
          minimum: 0

    DownstreamResult:
      type: object
      required:
        - apiName
        - status
      properties:
        apiName:
          type: string
        status:
          type: string
          enum: [SUCCESS, FAILURE]
        error:
          $ref: '#/components/schemas/DownstreamError'

    DownstreamError:
      type: object
      required:
        - code
        - message
        - downstreamStatus
      properties:
        code:
          type: string
        message:
          type: string
        downstreamStatus:
          type: integer

    ErrorResponse:
      type: object
      required:
        - code
        - reason
      properties:
        code:
          type: string
          enum: [BAD_REQUEST, FORBIDDEN, UNPROCESSABLE_ENTITY, INTERNAL_SERVER_ERROR]
        reason:
          type: string

  securitySchemes:
    applicationRestricted:
      type: oauth2
      description: |
        HMRC supports OAuth 2.0 for authenticating application restricted API requests using an OAuth 2.0 Bearer Token in the AUTHORIZATION header.
        See https://developer.service.hmrc.gov.uk/api-documentation/docs/authorisation/application-restricted-endpoints for details.
      flows:
        clientCredentials:
          tokenUrl: https://api.service.hmrc.gov.uk/oauth/token
          scopes:
            write:protect-connect: protect-connect
