{
  "openapi": "3.0.3",
  "info": {
    "title": "Retrieve Long Term Benefit Notes",
    "description": "# Usage Terms\nThese interfaces are business-critical interfaces for HMRC and DWP, supporting thousands of staff - all consumption, or change in consumption levels, should be registered and fully approved (see Registered Consumers below).\n",
    "version": "0.0.1 Draft",
    "x-integration-catalogue": {
      "reviewed-date": "2025-12-11T08:46:54Z",
      "publisher-reference": "ni-ltb-notes",
      "short-description": "Long Term Benefit Notes",
      "status": "ALPHA",
      "api-type": "SIMPLE",
      "platform": "HIP",
      "backends": [
        "NI"
      ],
      "domain": 3,
      "sub-domain": 3.1
    }
  },
  "servers": [
    {
      "url": "https://api.ipaas.prod.eis.ns2p.corp.hmrc.gov.uk/ni",
      "description": "Corporate - Production"
    },
    {
      "url": "https://api.ipaas.test.eis.ns2n.corp.hmrc.gov.uk/ni",
      "description": "Corporate - Test"
    },
    {
      "url": "https://hip.ws.hmrc.gov.uk/ni",
      "description": "MDTP - Production"
    },
    {
      "url": "https://hip.ws.ibt.hmrc.gov.uk/ni",
      "description": "MDTP - QA"
    }
  ],
  "security": [
    {
      "oAuth2": [
        "read:ni-ltb-notes"
      ]
    }
  ],
  "paths": {
    "/national-insurance/long-term-benefits/{identifier}/calculation/notes": {
      "get": {
        "tags": [
          "Long term Benefit"
        ],
        "summary": "Retrieve Long Term Benefit Notes",
        "description": "# Purpose\nThis API provides the capability to retrieve Long Term Benefit notes (concatenated text only).",
        "operationId": "GetLongTermBenefitNotes",
        "parameters": [
          {
            "$ref": "#/components/parameters/correlationId"
          },
          {
            "$ref": "#/components/parameters/govUkOriginatorId"
          },
          {
            "$ref": "#/components/parameters/govUkOrganisationId"
          },
          {
            "$ref": "#/components/parameters/govUkUserId"
          },
          {
            "$ref": "#/components/parameters/govUkUserName"
          },
          {
            "$ref": "#/components/parameters/govUkJobRole"
          },
          {
            "$ref": "#/components/parameters/Identifier"
          },
          {
            "$ref": "#/components/parameters/AssociatedCalculationSequenceNumber"
          },
          {
            "$ref": "#/components/parameters/BenefitType"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "headers": {
              "correlationId": {
                "$ref": "#/components/headers/correlationId"
              }
            },
            "content": {
              "application/json;charset=UTF-8": {
                "schema": {
                  "$ref": "#/components/schemas/LongTermBenefitNotesResponse"
                },
                "examples": {
                  "exampleResponse": {
                    "value": {
                      "longTermBenefitNotes": [
                        "Contracted out Employment: Scheme Membership Sequence Number: 1, Scheme Membership Start Date: '1978-04-06', Scheme Membership End Date: '08/12/1983', Method of Preservation: 'CHANGE OF RPA FROM COSR TO PP', Econ: 'E3004227R', Terminating Scon/Ascn: 'A7990001X', Revaluation Rate: 'FIXED', Termination Microfilm Number: '47510120', POST 88 GMP: 'UNKNOW', POST 88 COD: 0.00, PRE 88 GMP: 'UNKNOWN', PRE 88 COD: 26.53, Date GMP Extinguished: 'UNKNOWN', 'UNKNOWN'"
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request Response",
            "headers": {
              "correlationId": {
                "$ref": "#/components/headers/correlationId"
              }
            },
            "content": {
              "application/json;charset=UTF-8": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse_400"
                },
                "examples": {
                  "Actual_Response": {
                    "value": {
                      "failures": [
                        {
                          "reason": "HTTP message not readable",
                          "code": "400.2"
                        },
                        {
                          "reason": "Constraint violation: Invalid/Missing input parameter: <parameter>",
                          "code": "400.1"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "headers": {
              "correlationId": {
                "$ref": "#/components/headers/correlationId"
              }
            },
            "content": {
              "application/json;charset=UTF-8": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse_403"
                }
              }
            }
          },
          "404": {
            "description": "Not Found Response",
            "headers": {
              "correlationId": {
                "$ref": "#/components/headers/correlationId"
              }
            },
            "content": {
              "application/json;charset=UTF-8": {
                "examples": {
                  "Actual_Response": {
                    "value": {
                      "code": "404",
                      "reason": "Not Found"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "headers": {
              "correlationId": {
                "$ref": "#/components/headers/correlationId"
              }
            },
            "content": {
              "application/json;charset=UTF-8": {
                "schema": {
                  "$ref": "#/components/schemas/errorResponse_422"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error Response",
            "headers": {
              "correlationId": {
                "$ref": "#/components/headers/correlationId"
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "headers": {
      "correlationId": {
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/correlationId"
        }
      }
    },
    "parameters": {
      "correlationId": {
        "description": "Correlation ID - used for traceability purposes - note that this\nvalue in the response matches that received in the request to allow correlation.\n",
        "in": "header",
        "name": "correlationId",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/correlationId"
        }
      },
      "govUkOriginatorId": {
        "description": "Identity of the Originating System that made the API call.",
        "in": "header",
        "name": "gov-uk-originator-id",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/govUkOriginatorId"
        }
      },
      "govUkOrganisationId": {
        "description": "A unique organisation ID for the user.",
        "in": "header",
        "name": "gov-uk-organisation-id",
        "schema": {
          "$ref": "#/components/schemas/govUkOrganisationId"
        }
      },
      "govUkUserId": {
        "description": "A unique user ID for the user.",
        "in": "header",
        "name": "gov-uk-user-id",
        "required": false,
        "schema": {
          "$ref": "#/components/schemas/govUkUserId"
        }
      },
      "govUkUserName": {
        "description": "A unique username for the user.",
        "in": "header",
        "name": "gov-uk-user-name",
        "schema": {
          "$ref": "#/components/schemas/govUkUserName"
        }
      },
      "govUkJobRole": {
        "description": "A unique job role for the user.",
        "in": "header",
        "name": "gov-uk-job-role",
        "schema": {
          "$ref": "#/components/schemas/govUkJobRole"
        }
      },
      "Identifier": {
        "name": "identifier",
        "in": "path",
        "required": true,
        "description": "The identifier of which could be either a Temporary Reference Number (TRN) or a National Insurance Number (NINO).\n",
        "schema": {
          "$ref": "#/components/schemas/identifier"
        }
      },
      "AssociatedCalculationSequenceNumber": {
        "description": "Unique sequence number representing the position in the associated calculation history (i.e. row) of the associated calculation details entry for this individual - this would only be populated if the previous call did not transfer all of the data i.e. there are more rows marked to be collected still.\n",
        "in": "query",
        "name": "seqNo",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/associatedCalculationSequenceNumber"
        }
      },
      "BenefitType": {
        "description": "Denotes the benefit type.",
        "in": "query",
        "name": "type",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/benefitType"
        }
      }
    },
    "schemas": {
      "correlationId": {
        "description": "Correlation ID - used for traceability purposes - note that this\nvalue in the response matches that received in the request to allow correlation.\n",
        "example": "e470d658-99f7-4292-a4a1-ed12c72f1337",
        "format": "uuid",
        "type": "string"
      },
      "govUkOriginatorId": {
        "description": "Identity of the Originating System that made the API call",
        "type": "string",
        "minLength": 3,
        "maxLength": 40
      },
      "govUkOrganisationId": {
        "description": "A unique organisation ID for the user.",
        "type": "string",
        "example": "Department",
        "minLength": 4,
        "maxLength": 40
      },
      "govUkUserId": {
        "description": "A unique user ID for the user.",
        "minLength": 7,
        "maxLength": 7,
        "type": "string"
      },
      "govUkUserName": {
        "description": "A unique username for the user.",
        "type": "string",
        "minLength": 4,
        "maxLength": 20,
        "example": "Worker"
      },
      "govUkJobRole": {
        "description": "A unique job role for the user.",
        "type": "string",
        "minLength": 4,
        "example": "Social"
      },
      "identifier": {
        "description": "NINO (with optional suffix Aâ€“D) or TRN (2 digits + 1 uppercase letter + 5 digits).\n",
        "type": "string",
        "pattern": "^(((?:[ACEHJLMOPRSWXY][A-CEGHJ-NPR-TW-Z]|B[A-CEHJ-NPR-TW-Z]|G[ACEGHJ-NPR-TW-Z]|[KT][A-CEGHJ-MPR-TW-Z]|N[A-CEGHJL-NPR-SW-Z]|Z[A-CEGHJ-NPR-TW-Y])[0-9]{6}[A-D]?)|([0-9]{2}[A-Z]{1}[0-9]{5}))$"
      },
      "associatedCalculationSequenceNumber": {
        "description": "Sequence number in associated calculation history.",
        "type": "integer",
        "minimum": 1,
        "maximum": 65534
      },
      "benefitType": {
        "description": "Denotes the benefit type.",
        "type": "string"
      },
      "LongTermBenefitNotesResponse": {
        "description": "Response containing concatenated Long Term Benefit notes.",
        "type": "object",
        "properties": {
          "longTermBenefitNotes": {
            "description": "List of concatenated note fields.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/note"
            }
          }
        },
        "additionalProperties": false
      },
      "note": {
        "description": "Concatenated Note fields",
        "type": "string"
      },
      "errorResponse_400": {
        "description": "Array of Error Response Failure Object in Error Response.",
        "title": "Error Response",
        "properties": {
          "failures": {
            "items": {
              "$ref": "#/components/schemas/errorResourceObj_400"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "errorResourceObj_400": {
        "type": "object",
        "required": [
          "code",
          "reason"
        ],
        "properties": {
          "reason": {
            "minLength": 1,
            "description": "Displays the reason of the failure.",
            "type": "string",
            "maxLength": 128
          },
          "code": {
            "description": "The error code representing the error that has occurred. Valid values are\n400.1 - Constraint violation (Followed by 'Invalid/Missing input parameter path.to.field'\n400.2 - HTTP message not readable;",
            "type": "string",
            "enum": [
              "400.1",
              "400.2"
            ]
          }
        }
      },
      "errorResponse_403": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/errorResourceObj_403_Forbidden"
          },
          {
            "$ref": "#/components/schemas/errorResourceObj_403_UserNotAuthorised"
          }
        ],
        "description": "Error Response Payload for this API",
        "title": "Forbidden Error Response"
      },
      "errorResourceObj_403_Forbidden": {
        "title": "403_Forbidden",
        "type": "object",
        "required": [
          "code",
          "reason"
        ],
        "properties": {
          "reason": {
            "description": "Displays the reason of the failure.",
            "type": "string",
            "enum": [
              "Forbidden"
            ]
          },
          "code": {
            "description": "The error code representing the Forbidden Error.",
            "type": "string",
            "enum": [
              "403.2"
            ]
          }
        }
      },
      "errorResourceObj_403_UserNotAuthorised": {
        "title": "403_UserNotAuthorised",
        "type": "object",
        "required": [
          "code",
          "reason"
        ],
        "properties": {
          "reason": {
            "description": "Displays the reason of the failure.",
            "type": "string",
            "enum": [
              "User Not Authorised"
            ]
          },
          "code": {
            "description": "User Not Authorised.",
            "type": "string",
            "enum": [
              "403.1"
            ]
          }
        }
      },
      "errorResponse_422": {
        "description": "Error Response Payload for this API",
        "title": "Error Response",
        "type": "object",
        "properties": {
          "failures": {
            "$ref": "#/components/schemas/errorResponseFailure_422"
          }
        }
      },
      "errorResponseFailure_422": {
        "description": "Array of Error Response Failure Object in Error Response.",
        "title": "Failure Object in Error Response",
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/errorResourceObj_422"
        }
      },
      "errorResourceObj_422": {
        "type": "object",
        "required": [
          "code",
          "reason"
        ],
        "properties": {
          "reason": {
            "minLength": 1,
            "description": "Displays the reason of the failure.",
            "type": "string",
            "maxLength": 128
          },
          "code": {
            "minLength": 1,
            "description": "The error code representing the error that has occurred.",
            "type": "string",
            "maxLength": 10
          }
        }
      }
    },
    "securitySchemes": {
      "oAuth2": {
        "type": "oauth2",
        "description": "OAuth2 Client Credentials Flow",
        "flows": {
          "clientCredentials": {
            "tokenUrl": "/tokenUrl/not-required",
            "scopes": {
              "read:ni-ltb-notes": "Long Term Benefit Notes"
            }
          }
        }
      }
    }
  }
}